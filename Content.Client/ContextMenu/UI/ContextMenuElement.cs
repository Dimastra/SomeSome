using System;
using System.Runtime.CompilerServices;
using CompiledRobustXaml;
using Robust.Client.AutoGenerated;
using Robust.Client.Graphics;
using Robust.Client.UserInterface;
using Robust.Client.UserInterface.Controls;
using Robust.Shared.Analyzers;
using Robust.Shared.Maths;
using Robust.Shared.Utility;

namespace Content.Client.ContextMenu.UI
{
	// Token: 0x0200037D RID: 893
	[GenerateTypedNameReferences]
	[Virtual]
	public class ContextMenuElement : ContainerButton
	{
		// Token: 0x1700046B RID: 1131
		// (get) Token: 0x060015EC RID: 5612 RVA: 0x000818C0 File Offset: 0x0007FAC0
		// (set) Token: 0x060015ED RID: 5613 RVA: 0x000818C8 File Offset: 0x0007FAC8
		[Nullable(2)]
		public ContextMenuPopup SubMenu
		{
			[NullableContext(2)]
			get
			{
				return this._subMenu;
			}
			[NullableContext(2)]
			set
			{
				this._subMenu = value;
				this.ExpansionIndicator.Visible = (this._subMenu != null);
			}
		}

		// Token: 0x1700046C RID: 1132
		// (set) Token: 0x060015EE RID: 5614 RVA: 0x000818E5 File Offset: 0x0007FAE5
		[Nullable(1)]
		public virtual string Text
		{
			[NullableContext(1)]
			set
			{
				this.Label.SetMessage(FormattedMessage.FromMarkupPermissive(value.Trim()));
			}
		}

		// Token: 0x060015EF RID: 5615 RVA: 0x00081900 File Offset: 0x0007FB00
		[NullableContext(2)]
		public ContextMenuElement(string text = null)
		{
			ContextMenuElement.!XamlIlPopulateTrampoline(this);
			base.Margin = new Thickness(2f, 2f, 2f, 2f);
			base.SetOnlyStyleClass("contextMenuButton");
			if (text != null)
			{
				this.Text = text;
			}
		}

		// Token: 0x060015F0 RID: 5616 RVA: 0x0008194D File Offset: 0x0007FB4D
		protected override void Dispose(bool disposing)
		{
			base.Dispose(disposing);
			ContextMenuPopup subMenu = this._subMenu;
			if (subMenu != null)
			{
				subMenu.Dispose();
			}
			this._subMenu = null;
			this.ParentMenu = null;
		}

		// Token: 0x060015F1 RID: 5617 RVA: 0x00081975 File Offset: 0x0007FB75
		[NullableContext(1)]
		protected override void Draw(DrawingHandleScreen handle)
		{
			this.UpdateStyle();
			base.Draw(handle);
		}

		// Token: 0x060015F2 RID: 5618 RVA: 0x00081984 File Offset: 0x0007FB84
		protected virtual void UpdateStyle()
		{
			ContextMenuPopup subMenu = this._subMenu;
			if (subMenu != null && subMenu.Visible && !base.HasStylePseudoClass("hover"))
			{
				base.AddStylePseudoClass("hover");
				return;
			}
			if (base.DrawMode == 2)
			{
				return;
			}
			ContextMenuPopup subMenu2 = this._subMenu;
			if (subMenu2 == null || subMenu2.Visible)
			{
				return;
			}
			if (base.HasStylePseudoClass("hover"))
			{
				base.RemoveStylePseudoClass("hover");
			}
		}

		// Token: 0x1700046D RID: 1133
		// (get) Token: 0x060015F3 RID: 5619 RVA: 0x000819F5 File Offset: 0x0007FBF5
		protected Control Icon
		{
			get
			{
				return base.FindControl<Control>("Icon");
			}
		}

		// Token: 0x1700046E RID: 1134
		// (get) Token: 0x060015F4 RID: 5620 RVA: 0x00081A02 File Offset: 0x0007FC02
		protected RichTextLabel Label
		{
			get
			{
				return base.FindControl<RichTextLabel>("Label");
			}
		}

		// Token: 0x1700046F RID: 1135
		// (get) Token: 0x060015F5 RID: 5621 RVA: 0x00081A0F File Offset: 0x0007FC0F
		protected TextureRect ExpansionIndicator
		{
			get
			{
				return base.FindControl<TextureRect>("ExpansionIndicator");
			}
		}

		// Token: 0x060015F6 RID: 5622 RVA: 0x00081A1C File Offset: 0x0007FC1C
		static void xaml(IServiceProvider A_0, ContainerButton A_1)
		{
			XamlIlContext.Context<ContainerButton> context = new XamlIlContext.Context<ContainerButton>(A_0, null, "resm:Content.Client.ContextMenu.UI.ContextMenuElement.xaml?assembly=Content.Client");
			context.RootObject = A_1;
			context.IntermediateRoot = A_1;
			A_1.MinHeight = 32f;
			BoxContainer boxContainer = new BoxContainer();
			boxContainer.Orientation = 0;
			Control control = new Control();
			control.Name = "Icon";
			Control control2 = control;
			context.RobustNameScope.Register("Icon", control2);
			control.SetWidth = 32f;
			control.SetHeight = 32f;
			control2 = control;
			boxContainer.XamlChildren.Add(control2);
			RichTextLabel richTextLabel = new RichTextLabel();
			richTextLabel.Name = "Label";
			control2 = richTextLabel;
			context.RobustNameScope.Register("Label", control2);
			richTextLabel.MaxWidth = 300f;
			richTextLabel.HorizontalExpand = true;
			richTextLabel.VerticalAlignment = 2;
			richTextLabel.Margin = new Thickness(4f, 0f, 4f, 0f);
			control2 = richTextLabel;
			boxContainer.XamlChildren.Add(control2);
			TextureRect textureRect = new TextureRect();
			textureRect.Name = "ExpansionIndicator";
			control2 = textureRect;
			context.RobustNameScope.Register("ExpansionIndicator", control2);
			textureRect.HorizontalAlignment = 3;
			textureRect.Stretch = 4;
			string item = "contextMenuExpansionTexture";
			textureRect.StyleClasses.Add(item);
			textureRect.TextureScale = new Vector2(0.5f, 0.5f);
			textureRect.SetWidth = 32f;
			textureRect.SetHeight = 32f;
			textureRect.Visible = false;
			control2 = textureRect;
			boxContainer.XamlChildren.Add(control2);
			control2 = boxContainer;
			A_1.XamlChildren.Add(control2);
			if ((control2 = (A_1 as Control)) != null)
			{
				context.RobustNameScope.Absorb(control2.NameScope);
				control2.NameScope = context.RobustNameScope;
			}
			context.RobustNameScope.Complete();
		}

		// Token: 0x060015F7 RID: 5623 RVA: 0x00081C39 File Offset: 0x0007FE39
		private static void !XamlIlPopulateTrampoline(ContextMenuElement A_0)
		{
			ContextMenuElement.Populate:Content.Client.ContextMenu.UI.ContextMenuElement.xaml(null, A_0);
		}

		// Token: 0x04000B75 RID: 2933
		[Nullable(1)]
		public const string StyleClassContextMenuButton = "contextMenuButton";

		// Token: 0x04000B76 RID: 2934
		[Nullable(1)]
		public const string StyleClassContextMenuExpansionTexture = "contextMenuExpansionTexture";

		// Token: 0x04000B77 RID: 2935
		public const float ElementMargin = 2f;

		// Token: 0x04000B78 RID: 2936
		public const float ElementHeight = 32f;

		// Token: 0x04000B79 RID: 2937
		[Nullable(2)]
		public ContextMenuPopup ParentMenu;

		// Token: 0x04000B7A RID: 2938
		[Nullable(2)]
		private ContextMenuPopup _subMenu;
	}
}
