using System;
using System.Runtime.CompilerServices;
using CompiledRobustXaml;
using Content.Client.Viewport;
using Robust.Client.AutoGenerated;
using Robust.Client.Graphics;
using Robust.Client.UserInterface;
using Robust.Client.UserInterface.Controls;
using Robust.Client.UserInterface.CustomControls;
using Robust.Shared.Maths;

namespace Content.Client.Tabletop.UI
{
	// Token: 0x020000FC RID: 252
	[GenerateTypedNameReferences]
	public sealed class TabletopWindow : DefaultWindow
	{
		// Token: 0x06000719 RID: 1817 RVA: 0x00025758 File Offset: 0x00023958
		[NullableContext(2)]
		public TabletopWindow(IEye eye, Vector2i size)
		{
			TabletopWindow.!XamlIlPopulateTrampoline(this);
			this.ScalingVp.Eye = eye;
			this.ScalingVp.ViewportSize = size;
			this.FlipButton.OnButtonUp += this.Flip;
			base.OpenCentered();
		}

		// Token: 0x0600071A RID: 1818 RVA: 0x000257A8 File Offset: 0x000239A8
		[NullableContext(1)]
		private void Flip(BaseButton.ButtonEventArgs args)
		{
			IEye eye = this.ScalingVp.Eye;
			if (eye != null)
			{
				eye.Rotation = eye.Rotation.Opposite();
				this.FlipButton.HorizontalAlignment = ((this.FlipButton.HorizontalAlignment == 3) ? 1 : 3);
			}
		}

		// Token: 0x1700013B RID: 315
		// (get) Token: 0x0600071B RID: 1819 RVA: 0x000257F5 File Offset: 0x000239F5
		private ScalingViewport ScalingVp
		{
			get
			{
				return base.FindControl<ScalingViewport>("ScalingVp");
			}
		}

		// Token: 0x1700013C RID: 316
		// (get) Token: 0x0600071C RID: 1820 RVA: 0x00025802 File Offset: 0x00023A02
		private Button FlipButton
		{
			get
			{
				return base.FindControl<Button>("FlipButton");
			}
		}

		// Token: 0x0600071D RID: 1821 RVA: 0x00025810 File Offset: 0x00023A10
		static void xaml(IServiceProvider A_0, DefaultWindow A_1)
		{
			XamlIlContext.Context<DefaultWindow> context = new XamlIlContext.Context<DefaultWindow>(A_0, null, "resm:Content.Client.Tabletop.UI.TabletopWindow.xaml?assembly=Content.Client");
			context.RootObject = A_1;
			context.IntermediateRoot = A_1;
			ScalingViewport scalingViewport = new ScalingViewport();
			scalingViewport.Name = "ScalingVp";
			Control control = scalingViewport;
			context.RobustNameScope.Register("ScalingVp", control);
			scalingViewport.MouseFilter = 0;
			scalingViewport.RenderScaleMode = ScalingViewportRenderScaleMode.CeilInt;
			Button button = new Button();
			button.Name = "FlipButton";
			control = button;
			context.RobustNameScope.Register("FlipButton", control);
			button.Text = (string)new LocExtension("tabletop-chess-flip").ProvideValue();
			button.MinSize = new Vector2(60f, 30f);
			button.MaxSize = new Vector2(60f, 30f);
			button.HorizontalAlignment = 3;
			button.VerticalAlignment = 1;
			control = button;
			scalingViewport.XamlChildren.Add(control);
			control = scalingViewport;
			A_1.XamlChildren.Add(control);
			if ((control = (A_1 as Control)) != null)
			{
				context.RobustNameScope.Absorb(control.NameScope);
				control.NameScope = context.RobustNameScope;
			}
			context.RobustNameScope.Complete();
		}

		// Token: 0x0600071E RID: 1822 RVA: 0x00025978 File Offset: 0x00023B78
		private static void !XamlIlPopulateTrampoline(TabletopWindow A_0)
		{
			TabletopWindow.Populate:Content.Client.Tabletop.UI.TabletopWindow.xaml(null, A_0);
		}
	}
}
