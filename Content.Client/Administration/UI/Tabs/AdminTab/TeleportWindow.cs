using System;
using System.Runtime.CompilerServices;
using CompiledRobustXaml;
using Content.Client.Administration.UI.CustomControls;
using Content.Shared.Administration;
using Robust.Client.AutoGenerated;
using Robust.Client.Console;
using Robust.Client.UserInterface;
using Robust.Client.UserInterface.Controls;
using Robust.Client.UserInterface.CustomControls;
using Robust.Shared.IoC;
using Robust.Shared.Maths;

namespace Content.Client.Administration.UI.Tabs.AdminTab
{
	// Token: 0x020004AE RID: 1198
	[GenerateTypedNameReferences]
	public sealed class TeleportWindow : DefaultWindow
	{
		// Token: 0x06001DCD RID: 7629 RVA: 0x000AEA53 File Offset: 0x000ACC53
		protected override void EnteredTree()
		{
			this.SubmitButton.OnPressed += this.SubmitButtonOnOnPressed;
			this.PlayerList.OnSelectionChanged += this.OnListOnOnSelectionChanged;
		}

		// Token: 0x06001DCE RID: 7630 RVA: 0x000AEA83 File Offset: 0x000ACC83
		[NullableContext(2)]
		private void OnListOnOnSelectionChanged(PlayerInfo obj)
		{
			this._selectedPlayer = obj;
			this.SubmitButton.Disabled = (this._selectedPlayer == null);
		}

		// Token: 0x06001DCF RID: 7631 RVA: 0x000AEAA3 File Offset: 0x000ACCA3
		[NullableContext(1)]
		private void SubmitButtonOnOnPressed(BaseButton.ButtonEventArgs obj)
		{
			if (this._selectedPlayer == null)
			{
				return;
			}
			IoCManager.Resolve<IClientConsoleHost>().ExecuteCommand("tpto \"" + this._selectedPlayer.Username + "\"");
		}

		// Token: 0x17000662 RID: 1634
		// (get) Token: 0x06001DD0 RID: 7632 RVA: 0x000ABF31 File Offset: 0x000AA131
		private PlayerListControl PlayerList
		{
			get
			{
				return base.FindControl<PlayerListControl>("PlayerList");
			}
		}

		// Token: 0x17000663 RID: 1635
		// (get) Token: 0x06001DD1 RID: 7633 RVA: 0x00091514 File Offset: 0x0008F714
		private Button SubmitButton
		{
			get
			{
				return base.FindControl<Button>("SubmitButton");
			}
		}

		// Token: 0x06001DD2 RID: 7634 RVA: 0x000AEAD8 File Offset: 0x000ACCD8
		public TeleportWindow()
		{
			TeleportWindow.!XamlIlPopulateTrampoline(this);
		}

		// Token: 0x06001DD3 RID: 7635 RVA: 0x000AEAE8 File Offset: 0x000ACCE8
		static void xaml(IServiceProvider A_0, DefaultWindow A_1)
		{
			XamlIlContext.Context<DefaultWindow> context = new XamlIlContext.Context<DefaultWindow>(A_0, null, "resm:Content.Client.Administration.UI.Tabs.AdminTab.TeleportWindow.xaml?assembly=Content.Client");
			context.RootObject = A_1;
			context.IntermediateRoot = A_1;
			A_1.Title = (string)new LocExtension("Teleport").ProvideValue();
			A_1.MinSize = new Vector2(425f, 230f);
			BoxContainer boxContainer = new BoxContainer();
			boxContainer.Orientation = 1;
			PlayerListControl playerListControl = new PlayerListControl();
			playerListControl.Name = "PlayerList";
			Control control = playerListControl;
			context.RobustNameScope.Register("PlayerList", control);
			control = playerListControl;
			boxContainer.XamlChildren.Add(control);
			Button button = new Button();
			button.Name = "SubmitButton";
			control = button;
			context.RobustNameScope.Register("SubmitButton", control);
			button.Text = (string)new LocExtension("Teleport").ProvideValue();
			control = button;
			boxContainer.XamlChildren.Add(control);
			control = boxContainer;
			A_1.XamlChildren.Add(control);
			if ((control = (A_1 as Control)) != null)
			{
				context.RobustNameScope.Absorb(control.NameScope);
				control.NameScope = context.RobustNameScope;
			}
			context.RobustNameScope.Complete();
		}

		// Token: 0x06001DD4 RID: 7636 RVA: 0x000AEC4E File Offset: 0x000ACE4E
		private static void !XamlIlPopulateTrampoline(TeleportWindow A_0)
		{
			TeleportWindow.Populate:Content.Client.Administration.UI.Tabs.AdminTab.TeleportWindow.xaml(null, A_0);
		}

		// Token: 0x04000EA2 RID: 3746
		[Nullable(2)]
		private PlayerInfo _selectedPlayer;
	}
}
