using System;
using System.Collections.Generic;
using System.Runtime.CompilerServices;
using CompiledRobustXaml;
using Content.Shared.Ghost.Roles;
using Robust.Client.AutoGenerated;
using Robust.Client.UserInterface;
using Robust.Client.UserInterface.Controls;
using Robust.Client.UserInterface.CustomControls;
using Robust.Shared.Maths;

namespace Content.Client.UserInterface.Systems.Ghost.Controls.Roles
{
	// Token: 0x02000091 RID: 145
	[NullableContext(2)]
	[Nullable(0)]
	[GenerateTypedNameReferences]
	public sealed class GhostRolesWindow : DefaultWindow
	{
		// Token: 0x14000015 RID: 21
		// (add) Token: 0x06000357 RID: 855 RVA: 0x00014714 File Offset: 0x00012914
		// (remove) Token: 0x06000358 RID: 856 RVA: 0x0001474C File Offset: 0x0001294C
		public event Action<GhostRoleInfo> OnRoleRequested;

		// Token: 0x14000016 RID: 22
		// (add) Token: 0x06000359 RID: 857 RVA: 0x00014784 File Offset: 0x00012984
		// (remove) Token: 0x0600035A RID: 858 RVA: 0x000147BC File Offset: 0x000129BC
		public event Action<GhostRoleInfo> OnRoleFollow;

		// Token: 0x0600035B RID: 859 RVA: 0x000147F1 File Offset: 0x000129F1
		public void ClearEntries()
		{
			this.NoRolesMessage.Visible = true;
			this.EntryContainer.DisposeAllChildren();
		}

		// Token: 0x0600035C RID: 860 RVA: 0x0001480C File Offset: 0x00012A0C
		[NullableContext(1)]
		public void AddEntry(string name, string description, IEnumerable<GhostRoleInfo> roles)
		{
			this.NoRolesMessage.Visible = false;
			GhostRolesEntry ghostRolesEntry = new GhostRolesEntry(name, description, roles);
			ghostRolesEntry.OnRoleSelected += this.OnRoleRequested;
			ghostRolesEntry.OnRoleFollow += this.OnRoleFollow;
			this.EntryContainer.AddChild(ghostRolesEntry);
		}

		// Token: 0x1700008E RID: 142
		// (get) Token: 0x0600035D RID: 861 RVA: 0x00014852 File Offset: 0x00012A52
		[Nullable(0)]
		private Label NoRolesMessage
		{
			[NullableContext(0)]
			get
			{
				return base.FindControl<Label>("NoRolesMessage");
			}
		}

		// Token: 0x1700008F RID: 143
		// (get) Token: 0x0600035E RID: 862 RVA: 0x0001485F File Offset: 0x00012A5F
		[Nullable(0)]
		private BoxContainer EntryContainer
		{
			[NullableContext(0)]
			get
			{
				return base.FindControl<BoxContainer>("EntryContainer");
			}
		}

		// Token: 0x0600035F RID: 863 RVA: 0x0001486C File Offset: 0x00012A6C
		public GhostRolesWindow()
		{
			GhostRolesWindow.!XamlIlPopulateTrampoline(this);
		}

		// Token: 0x06000360 RID: 864 RVA: 0x0001487C File Offset: 0x00012A7C
		static void xaml(IServiceProvider A_0, DefaultWindow A_1)
		{
			XamlIlContext.Context<DefaultWindow> context = new XamlIlContext.Context<DefaultWindow>(A_0, null, "resm:Content.Client.UserInterface.Systems.Ghost.Controls.Roles.GhostRolesWindow.xaml?assembly=Content.Client");
			context.RootObject = A_1;
			context.IntermediateRoot = A_1;
			A_1.Title = (string)new LocExtension("ghost-roles-window-title").ProvideValue();
			A_1.MinSize = new Vector2(375f, 275f);
			Label label = new Label();
			label.Name = "NoRolesMessage";
			Control control = label;
			context.RobustNameScope.Register("NoRolesMessage", control);
			label.Text = (string)new LocExtension("ghost-roles-window-no-roles-available-label").ProvideValue();
			label.VerticalAlignment = 1;
			control = label;
			A_1.XamlChildren.Add(control);
			ScrollContainer scrollContainer = new ScrollContainer();
			scrollContainer.VerticalExpand = true;
			scrollContainer.HScrollEnabled = false;
			BoxContainer boxContainer = new BoxContainer();
			boxContainer.Orientation = 1;
			boxContainer.Name = "EntryContainer";
			control = boxContainer;
			context.RobustNameScope.Register("EntryContainer", control);
			boxContainer.VerticalExpand = true;
			control = boxContainer;
			scrollContainer.XamlChildren.Add(control);
			control = scrollContainer;
			A_1.XamlChildren.Add(control);
			if ((control = (A_1 as Control)) != null)
			{
				context.RobustNameScope.Absorb(control.NameScope);
				control.NameScope = context.RobustNameScope;
			}
			context.RobustNameScope.Complete();
		}

		// Token: 0x06000361 RID: 865 RVA: 0x00014A0E File Offset: 0x00012C0E
		private static void !XamlIlPopulateTrampoline(GhostRolesWindow A_0)
		{
			GhostRolesWindow.Populate:Content.Client.UserInterface.Systems.Ghost.Controls.Roles.GhostRolesWindow.xaml(null, A_0);
		}
	}
}
