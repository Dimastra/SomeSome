using System;
using System.Collections.Generic;
using System.Runtime.CompilerServices;
using CompiledRobustXaml;
using Content.Shared.Ghost.Roles;
using Robust.Client.AutoGenerated;
using Robust.Client.UserInterface;
using Robust.Client.UserInterface.Controls;
using Robust.Shared.Maths;

namespace Content.Client.UserInterface.Systems.Ghost.Controls.Roles
{
	// Token: 0x0200008C RID: 140
	[GenerateTypedNameReferences]
	public sealed class GhostRolesEntry : BoxContainer
	{
		// Token: 0x14000013 RID: 19
		// (add) Token: 0x0600033C RID: 828 RVA: 0x000140A8 File Offset: 0x000122A8
		// (remove) Token: 0x0600033D RID: 829 RVA: 0x000140E0 File Offset: 0x000122E0
		[Nullable(2)]
		[method: NullableContext(2)]
		[Nullable(2)]
		public event Action<GhostRoleInfo> OnRoleSelected;

		// Token: 0x14000014 RID: 20
		// (add) Token: 0x0600033E RID: 830 RVA: 0x00014118 File Offset: 0x00012318
		// (remove) Token: 0x0600033F RID: 831 RVA: 0x00014150 File Offset: 0x00012350
		[Nullable(2)]
		[method: NullableContext(2)]
		[Nullable(2)]
		public event Action<GhostRoleInfo> OnRoleFollow;

		// Token: 0x06000340 RID: 832 RVA: 0x00014188 File Offset: 0x00012388
		[NullableContext(1)]
		public GhostRolesEntry(string name, string description, IEnumerable<GhostRoleInfo> roles)
		{
			GhostRolesEntry.!XamlIlPopulateTrampoline(this);
			this.Title.Text = name;
			this.Description.SetMessage(description);
			using (IEnumerator<GhostRoleInfo> enumerator = roles.GetEnumerator())
			{
				while (enumerator.MoveNext())
				{
					GhostRoleInfo role = enumerator.Current;
					GhostRoleEntryButtons ghostRoleEntryButtons = new GhostRoleEntryButtons();
					ghostRoleEntryButtons.RequestButton.OnPressed += delegate(BaseButton.ButtonEventArgs _)
					{
						Action<GhostRoleInfo> onRoleSelected = this.OnRoleSelected;
						if (onRoleSelected == null)
						{
							return;
						}
						onRoleSelected(role);
					};
					ghostRoleEntryButtons.FollowButton.OnPressed += delegate(BaseButton.ButtonEventArgs _)
					{
						Action<GhostRoleInfo> onRoleFollow = this.OnRoleFollow;
						if (onRoleFollow == null)
						{
							return;
						}
						onRoleFollow(role);
					};
					this.Buttons.AddChild(ghostRoleEntryButtons);
				}
			}
		}

		// Token: 0x1700008B RID: 139
		// (get) Token: 0x06000341 RID: 833 RVA: 0x0000F66E File Offset: 0x0000D86E
		private Label Title
		{
			get
			{
				return base.FindControl<Label>("Title");
			}
		}

		// Token: 0x1700008C RID: 140
		// (get) Token: 0x06000342 RID: 834 RVA: 0x00014240 File Offset: 0x00012440
		private RichTextLabel Description
		{
			get
			{
				return base.FindControl<RichTextLabel>("Description");
			}
		}

		// Token: 0x1700008D RID: 141
		// (get) Token: 0x06000343 RID: 835 RVA: 0x0001424D File Offset: 0x0001244D
		private BoxContainer Buttons
		{
			get
			{
				return base.FindControl<BoxContainer>("Buttons");
			}
		}

		// Token: 0x06000344 RID: 836 RVA: 0x0001425C File Offset: 0x0001245C
		static void xaml(IServiceProvider A_0, BoxContainer A_1)
		{
			XamlIlContext.Context<BoxContainer> context = new XamlIlContext.Context<BoxContainer>(A_0, null, "resm:Content.Client.UserInterface.Systems.Ghost.Controls.Roles.GhostRolesEntry.xaml?assembly=Content.Client");
			context.RootObject = A_1;
			context.IntermediateRoot = A_1;
			A_1.Orientation = 1;
			A_1.HorizontalExpand = true;
			A_1.Margin = new Thickness(0f, 0f, 8f, 8f);
			Label label = new Label();
			label.Name = "Title";
			Control control = label;
			context.RobustNameScope.Register("Title", control);
			string item = "LabelKeyText";
			label.StyleClasses.Add(item);
			control = label;
			A_1.XamlChildren.Add(control);
			PanelContainer panelContainer = new PanelContainer();
			item = "HighDivider";
			panelContainer.StyleClasses.Add(item);
			control = panelContainer;
			A_1.XamlChildren.Add(control);
			RichTextLabel richTextLabel = new RichTextLabel();
			richTextLabel.Name = "Description";
			control = richTextLabel;
			context.RobustNameScope.Register("Description", control);
			richTextLabel.Margin = new Thickness(0f, 4f, 0f, 4f);
			control = richTextLabel;
			A_1.XamlChildren.Add(control);
			BoxContainer boxContainer = new BoxContainer();
			boxContainer.Name = "Buttons";
			control = boxContainer;
			context.RobustNameScope.Register("Buttons", control);
			boxContainer.HorizontalAlignment = 1;
			boxContainer.Orientation = 1;
			boxContainer.SeparationOverride = new int?(5);
			control = boxContainer;
			A_1.XamlChildren.Add(control);
			if ((control = (A_1 as Control)) != null)
			{
				context.RobustNameScope.Absorb(control.NameScope);
				control.NameScope = context.RobustNameScope;
			}
			context.RobustNameScope.Complete();
		}

		// Token: 0x06000345 RID: 837 RVA: 0x00014453 File Offset: 0x00012653
		private static void !XamlIlPopulateTrampoline(GhostRolesEntry A_0)
		{
			GhostRolesEntry.Populate:Content.Client.UserInterface.Systems.Ghost.Controls.Roles.GhostRolesEntry.xaml(null, A_0);
		}
	}
}
